# Agent Factory Recon Report
Generated: 2026-02-21T10:58:07+00:00

## Directory Structure
```text
.
./.editorconfig
./.factory
./.factory/runs
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09/commands.log
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09/patches
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09/plan.json
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09/result.json
./.factory/runs/0ad96d78-9d96-4c1e-b23a-58c4c12f4e09/task.json
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937/commands.log
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937/patches
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937/plan.json
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937/result.json
./.factory/runs/0df8bed8-e724-46b8-828b-aec373a4c937/task.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/commands.log
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/git-pr.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/patches
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/plan.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/repo-read.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/result.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/task.json
./.factory/runs/0e636001-1bc9-486e-a225-bed4b118d5a1/validate.json
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/commands.log
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/patches
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/plan.json
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/repo-read.json
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/result.json
./.factory/runs/32aa92dc-bf60-48e0-bc0e-9bb35efc4861/task.json
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8/commands.log
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8/patches
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8/plan.json
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8/result.json
./.factory/runs/39b6e4b0-6ace-43db-a811-a015efd3fcd8/task.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/commands.log
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/git-pr.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/patches
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/plan.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/repo-read.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/result.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/task.json
./.factory/runs/52ff8eb1-c036-4924-bb09-f40d66c00b3d/validate.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/commands.log
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/git-pr.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/patches
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/plan.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/repo-read.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/result.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/task.json
./.factory/runs/5df3fb5b-569a-4edf-a5fc-004df9723e54/validate.json
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd/commands.log
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd/patches
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd/plan.json
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd/result.json
./.factory/runs/6458df6b-eb7c-460c-8979-1f4c77abeddd/task.json
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/commands.log
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/patches
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/plan.json
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/repo-read.json
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/result.json
./.factory/runs/7c887ff8-3230-4079-847e-ddb5996dcb07/task.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/commands.log
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/git-pr.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/patches
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/plan.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/repo-read.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/result.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/task.json
./.factory/runs/801d9e1d-09d1-462d-bf36-6ac15c216f6d/validate.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/commands.log
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/git-pr.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/patches
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/plan.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/repo-read.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/result.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/task.json
./.factory/runs/929883c1-e78e-4757-b301-9a95d900086c/validate.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/commands.log
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/git-pr.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/patches
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/plan.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/repo-read.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/result.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/task.json
./.factory/runs/995a8d8f-cb41-4776-8281-86cbbcefc7f3/validate.json
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed/commands.log
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed/patches
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed/plan.json
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed/result.json
./.factory/runs/b34cd068-11db-42b1-b032-1a110a4a47ed/task.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/commands.log
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/git-pr.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/patches
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/plan.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/repo-read.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/result.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/task.json
./.factory/runs/c24ef7d4-c8c2-40c6-9791-001b4665518c/validate.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/commands.log
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/git-pr.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/patches
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/plan.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/repo-read.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/result.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/task.json
./.factory/runs/c3897bb7-9e39-4145-98b1-50d889ec65aa/validate.json
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e/commands.log
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e/patches
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e/plan.json
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e/result.json
./.factory/runs/c8e1e10c-8f0d-454d-b427-7fe6a000ba7e/task.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/commands.log
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/git-pr.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/patches
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/plan.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/repo-read.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/result.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/task.json
./.factory/runs/d7150894-171f-449a-9b96-92b945695525/validate.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/commands.log
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/git-pr.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/patches
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/plan.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/repo-read.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/result.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/task.json
./.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/validate.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/commands.log
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/git-pr.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/patches
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/plan.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/repo-read.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/result.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/task.json
./.factory/runs/e1f44489-b7ea-4d1c-a1b3-590f68036f43/validate.json
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc/commands.log
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc/patches
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc/plan.json
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc/result.json
./.factory/runs/e3439c6c-86f4-44b2-b1a2-d7d43acc67cc/task.json
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52/commands.log
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52/patches
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52/plan.json
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52/result.json
./.factory/runs/f9aac7a4-67a0-4984-ac1f-d90d6ac54f52/task.json
./.factory/test-validate
./.factory/test-validate-bad
./.factory/test-validate-bad/commands.log
./.factory/test-validate/commands.log
./.git
./.gitattributes
./.github
./.github/CODEOWNERS
./.github/dependabot.yml
./.github/workflows
./.github/workflows/ci.yml
./.github/workflows/factory-health.yml
./.gitignore
./.nvmrc
./.pnpm-store
./.pnpm-store/v3
./AGENTS.md
./AGENT_FACTORY_MVP.md
./RECON_REPORT.md
./_contracts_showConfig.json
./_contracts_tsc_showConfig.json
./_evals_tsc_showConfig.json
./compat_snapshot.current.json
./hello.txt
./node_modules
./package.json
./packages
./packages/contracts
./packages/contracts/CHANGELOG.md
./packages/contracts/README.md
./packages/contracts/compat_snapshot.current.json
./packages/contracts/compat_snapshot.json
./packages/contracts/dist
./packages/contracts/dist/scripts
./packages/contracts/dist/src
./packages/contracts/node_modules
./packages/contracts/package.json
./packages/contracts/scripts
./packages/contracts/scripts/generate-snapshot.ts
./packages/contracts/src
./packages/contracts/src/compat
./packages/contracts/src/errors
./packages/contracts/src/events
./packages/contracts/src/index.ts
./packages/contracts/src/schemas
./packages/contracts/src/version.ts
./packages/contracts/tsconfig.json
./packages/evals
./packages/evals/.reports
./packages/evals/.reports/agent_retrieval_smoke.latest.json
./packages/evals/.reports/agent_runner_smoke.latest.json
./packages/evals/.reports/check_agent_manifests.latest.json
./packages/evals/.reports/eval_smoke.latest.json
./packages/evals/README.md
./packages/evals/dist
./packages/evals/dist/scripts
./packages/evals/dist/src
./packages/evals/node_modules
./packages/evals/package.json
./packages/evals/scripts
./packages/evals/scripts/agent_retrieval_smoke.ts
./packages/evals/scripts/agent_runner_smoke.ts
./packages/evals/scripts/check_agent_manifests.ts
./packages/evals/scripts/check_no_agent_runtime_copies.ts
./packages/evals/scripts/eval_full.ts
./packages/evals/scripts/eval_smoke.ts
./packages/evals/src
./packages/evals/src/adapters
./packages/evals/src/datasets
./packages/evals/src/index.ts
./packages/evals/src/runner
./packages/evals/src/scripts
./packages/evals/src/suites
./packages/evals/tsconfig.json
./packages/factory
./packages/factory/dist
./packages/factory/dist/cli.d.ts
./packages/factory/dist/cli.d.ts.map
./packages/factory/dist/cli.js
./packages/factory/dist/cli.js.map
./packages/factory/node_modules
./packages/factory/package.json
./packages/factory/src
./packages/factory/src/cli.ts
./packages/factory/tsconfig.json
./pnpm-lock.yaml
./pnpm-workspace.yaml
./services
./services/agent-runner
./services/agent-runner/dist
./services/agent-runner/dist/index.d.ts
./services/agent-runner/dist/index.js
./services/agent-runner/dist/index.js.map
./services/agent-runner/node_modules
./services/agent-runner/package.json
./services/agent-runner/src
./services/agent-runner/src/index.ts
./services/agent-runner/tsconfig.json
./services/agent-runtime
./services/agent-runtime/dist
./services/agent-runtime/dist/index.d.ts
./services/agent-runtime/dist/index.js
./services/agent-runtime/dist/index.js.map
./services/agent-runtime/package.json
./services/agent-runtime/src
./services/agent-runtime/src/index.ts
./services/agent-runtime/tsconfig.json
./services/agents
./services/agents/_shared
./services/agents/_shared/runtime.d.ts
./services/agents/_shared/runtime.js
./services/agents/_shared/runtime.shared.d.ts
./services/agents/_shared/runtime.shared.js
./services/agents/_shared/runtime.ts
./services/agents/esm-smoke
./services/agents/esm-smoke/README.md
./services/agents/esm-smoke/agent.json
./services/agents/esm-smoke/dist
./services/agents/esm-smoke/node_modules
./services/agents/esm-smoke/package.json
./services/agents/esm-smoke/src
./services/agents/esm-smoke/tsconfig.json
./services/agents/git-pr
./services/agents/git-pr/agent.json
./services/agents/git-pr/dist
./services/agents/git-pr/node_modules
./services/agents/git-pr/package.json
./services/agents/git-pr/src
./services/agents/git-pr/tsconfig.json
./services/agents/plan
./services/agents/plan/agent.json
./services/agents/plan/dist
./services/agents/plan/node_modules
./services/agents/plan/package.json
./services/agents/plan/src
./services/agents/plan/tsconfig.json
./services/agents/repo-patch
./services/agents/repo-patch/README.md
./services/agents/repo-patch/agent.json
./services/agents/repo-patch/dist
./services/agents/repo-patch/node_modules
./services/agents/repo-patch/package.json
./services/agents/repo-patch/src
./services/agents/repo-patch/tsconfig.json
./services/agents/repo-read
./services/agents/repo-read/agent.json
./services/agents/repo-read/dist
./services/agents/repo-read/node_modules
./services/agents/repo-read/package.json
./services/agents/repo-read/src
./services/agents/repo-read/tsconfig.json
./services/agents/retrieval-smoke
./services/agents/retrieval-smoke/README.md
./services/agents/retrieval-smoke/agent.json
./services/agents/retrieval-smoke/dist
./services/agents/retrieval-smoke/node_modules
./services/agents/retrieval-smoke/package.json
./services/agents/retrieval-smoke/src
./services/agents/retrieval-smoke/tsconfig.json
./services/agents/validate
./services/agents/validate/agent.json
./services/agents/validate/dist
./services/agents/validate/node_modules
./services/agents/validate/package.json
./services/agents/validate/src
./services/agents/validate/tsconfig.json
./tsconfig.base.json
./tsconfig.json
./verify-sprint.ps1
```

## File Inventory
| File Path | Classification | Summary (1 sentence) | Production Ready? |
| --- | --- | --- | --- |
| `./AGENTS.md` | BOOTSTRAP_ARTEFACT | Repository invariants plus sprint-loop process guidance anchored to MVP milestone workflow. | No |
| `./AGENT_FACTORY_MVP.md` | BOOTSTRAP_ARTEFACT | Single-source milestone checklist (D0-D11) and sprint log for the self-build process. | No |
| `./_contracts_showConfig.json` | CONFIG | Generated TypeScript show-config snapshot for contracts package build settings. | No |
| `./_contracts_tsc_showConfig.json` | CONFIG | Generated `tsc --showConfig` output used for debugging contract compiler config. | No |
| `./_evals_tsc_showConfig.json` | CONFIG | Generated `tsc --showConfig` output for evals package compiler settings. | No |
| `./compat_snapshot.current.json` | CONFIG | Root compatibility snapshot artifact capturing exported schema signatures. | Partial |
| `./package.json` | CONFIG | Root workspace scripts and health command orchestration for build/evals/contracts/CLI. | Yes |
| `./packages/contracts/CHANGELOG.md` | UNKNOWN | Minimal changelog noting initial template release only. | Partial |
| `./packages/contracts/README.md` | UNKNOWN | Short package description for versioned contracts and snapshot-based breaking checks. | Yes |
| `./packages/contracts/compat_snapshot.current.json` | CONFIG | Current contracts compatibility snapshot including repo-patch schemas. | Yes |
| `./packages/contracts/compat_snapshot.json` | CONFIG | Baseline compatibility snapshot used by breaking-change checks. | Yes |
| `./packages/contracts/package.json` | CONFIG | Contracts package metadata with build/typecheck/snapshot scripts and Zod dependency. | Yes |
| `./packages/contracts/tsconfig.json` | CONFIG | Contracts TypeScript compiler config with `dist` output and declaration emission. | Yes |
| `./packages/evals/README.md` | UNKNOWN | Brief description of deterministic eval gate intent and fixture-first design. | Yes |
| `./packages/evals/package.json` | CONFIG | Evals package scripts for smoke/full suites and deterministic guard checks. | Yes |
| `./packages/evals/tsconfig.json` | CONFIG | Evals TypeScript build config targeting `dist` for src and script entrypoints. | Yes |
| `./packages/factory/package.json` | CONFIG | Factory CLI package metadata linking `af` binary to compiled CLI entry. | Yes |
| `./packages/factory/tsconfig.json` | CONFIG | NodeNext CLI compile config generating declarations and sourcemaps into `dist`. | Yes |
| `./pnpm-lock.yaml` | CONFIG | Workspace lockfile pinning dependency graph and workspace link importers. | Yes |
| `./pnpm-workspace.yaml` | CONFIG | pnpm workspace globs for `services/*`, `services/agents/*`, and `packages/*`. | Yes |
| `./services/agent-runner/package.json` | CONFIG | Agent runner package metadata with runtime dependency and build scripts. | Yes |
| `./services/agent-runner/tsconfig.json` | CONFIG | Runner TypeScript config for NodeNext module output into `dist`. | Yes |
| `./services/agent-runtime/package.json` | CONFIG | Shared runtime package metadata and build/typecheck scripts. | Yes |
| `./services/agent-runtime/tsconfig.json` | CONFIG | Runtime TypeScript config defining build output and Node types. | Yes |
| `./tsconfig.base.json` | CONFIG | Base strict TypeScript compiler options shared across workspace packages. | Yes |
| `./tsconfig.json` | CONFIG | Root tsconfig that extends the shared base configuration. | Yes |

## Layer 1 Pipeline Assessment
| Stage | File(s) | Status | Notes |
| --- | --- | --- | --- |
| Plan | `services/agents/plan/src/index.ts`, `services/agents/plan/agent.json` | Complete | Implemented rule-based plan generation with touched file derivation, command selection, and scope checks (`services/agents/plan/src/index.ts:70`, `services/agents/plan/src/index.ts:107`). |
| Implement | `services/agents/repo-patch/src/index.ts`, `services/agents/repo-patch/agent.json` | Partial | Implementation exists but patch synthesis is hardcoded to `hello.txt` (`buildHelloPatch`) and apply logic only supports that path (`services/agents/repo-patch/src/index.ts:73`, `services/agents/repo-patch/src/index.ts:100`). |
| Verify | `services/agents/validate/src/index.ts`, `packages/evals/src/scripts/check_agent_manifests.ts`, `packages/evals/src/scripts/agent_runner_smoke.ts` | Partial | Verification components run allowlisted commands and smoke checks, but validation coverage is narrow and acceptance remains mostly smoke-level. |
| Integrate | `services/agents/repo-patch/src/index.ts`, `services/agent-runner/src/index.ts` | Partial | Repo-patch orchestrates `repo-read -> plan -> validate -> git-pr` (`services/agents/repo-patch/src/index.ts:324`, `services/agents/repo-patch/src/index.ts:366`, `services/agents/repo-patch/src/index.ts:379`) via manifest-driven runner (`services/agent-runner/src/index.ts:274`). |
| Operate | `packages/evals/src/runner/*.ts`, `.github/workflows/ci.yml`, `.github/workflows/factory-health.yml`, `verify-sprint.ps1` | Partial | Operational guardrails exist (CI health gate, logging, local verify script), but no dedicated runtime monitoring/maintenance agent stage. |

Notes:
- The five stages are present as code entrypoints, but only Plan is fully generic today.
- Implement/Integrate are constrained by the hardcoded patch path and non-generalized patching logic.

## State Management
State is file-centric and contract-backed, with explicit handoffs between sub-agents.

1. Contract schemas define the canonical task/plan/patch/result state shapes in `packages/contracts/src/schemas/repo-patch.schema.ts:5` and `packages/contracts/src/schemas/repo-patch.schema.ts:54`.

```ts
export const RepoPatchTaskSchema = z.object({ taskId, goal, constraints, fileScope, mode });
export const RepoPatchPlanSchema = z.object({ steps, touchedFiles, commands, risks });
export const RepoPatchResultSchema = z.object({ ok, correlationId, timings, outputs, errors });
```

2. Repo-patch orchestrator creates a per-run state directory and writes structured artifacts under `.factory/runs/<correlationId>/` (`services/agents/repo-patch/src/index.ts:270`, `services/agents/repo-patch/src/index.ts:279`, `services/agents/repo-patch/src/index.ts:324`, `services/agents/repo-patch/src/index.ts:396`).

```ts
const runDir = join(process.cwd(), ".factory", "runs", correlationId);
await writeJsonArtifact(runDir, "task.json", task);
await invokeSubAgent("repo-read", repoReadInput, "repo-read.json");
await invokeSubAgent("plan", planInput, "plan.json");
await invokeSubAgent("validate", validateInput, "validate.json");
await invokeSubAgent("git-pr", gitPrInput, "git-pr.json");
```

3. Observed artifact structure in workspace matches this handoff pattern, e.g. `.factory/runs/e094e8a1-5890-4858-9920-d2dcf4f45693/` contains `task.json`, `repo-read.json`, `plan.json`, `validate.json`, `git-pr.json`, `result.json`, `commands.log`, and `patches/001-hello.txt.diff`.

4. CLI composes final output by reading run artifacts (`validate.json`, `git-pr.json`) and emitting a single `factory.result` event (`packages/factory/src/cli.ts:266`, `packages/factory/src/cli.ts:283`, `packages/factory/src/cli.ts:483`).

5. Environment variables wire runtime behavior/logging:
- `EVAL_RETRIEVAL_MODE` and `RETRIEVAL_ENDPOINT` in `packages/evals/src/adapters/retrieval_adapter.ts:6`.
- `LOG_LEVEL` and `LOG_FORMAT` in `packages/evals/src/runner/logger.ts:12` and `packages/contracts/src/compat/logger.ts:12`.
- CI sets `LOG_LEVEL`/`LOG_FORMAT` in `.github/workflows/factory-health.yml:83`.

6. State contracts are explicit in `packages/contracts`; there is no separate `packages/contracts`-style schema package for a distinct Layer 2 orchestration interface yet.

## Documentation Audit
| File | Bootstrap-Era? | Content Summary (1-2 sentences) | Reusable Content? |
| --- | --- | --- | --- |
| `AGENTS.md` | Yes | Defines core invariants plus sprint protocol and milestone-gated development loop tied to MVP checklist. | Partial |
| `AGENT_FACTORY_MVP.md` | Yes | Detailed self-build checklist with D0-D11 milestones, acceptance commands, and sprint log history. | Partial |
| `packages/contracts/CHANGELOG.md` | No | One-entry changelog indicating initial contracts template release. | Yes |
| `packages/contracts/README.md` | No | Short description of contracts package scope and compatibility strategy. | Yes |
| `packages/evals/README.md` | No | High-level description of deterministic eval package and fixture-first approach. | Yes |
| `packages/evals/src/datasets/README.md` | No | Dataset policy for tiny deterministic smoke sets versus future full datasets. | Yes |
| `services/agents/esm-smoke/README.md` | No | Scaffold placeholder text with no real agent-specific documentation. | No |
| `services/agents/repo-patch/README.md` | No | Scaffold placeholder text; does not document actual repo-patch behavior/safety constraints. | No |
| `services/agents/retrieval-smoke/README.md` | No | Scaffold placeholder text with generic input/output wording only. | No |

## Infrastructure & Tooling
- Package manager: `pnpm` workspace (`packageManager: pnpm@9.0.0`) with globs in `pnpm-workspace.yaml` and a root lockfile at `pnpm-lock.yaml`.
  - Readiness: Mostly production-ready.
  - Notes: Lockfile includes importers for all workspace packages (including `services/agent-runtime: {}`), and CI enforces `pnpm install --frozen-lockfile`; no stale-lockfile signal was found in repository state.

- Build system: TypeScript-based builds across packages/services/agents with per-package `build` and `typecheck` scripts outputting to `dist`.
  - Readiness: Production-ready for Layer 1 packaging.
  - Notes: Shared strict base config in `tsconfig.base.json`; runtime/runner/agents use NodeNext-oriented configs.

- CI/CD: GitHub Actions workflows in `.github/workflows/ci.yml` and `.github/workflows/factory-health.yml`.
  - Readiness: Production-ready as deterministic quality gates.
  - Notes: Both workflows run frozen-lockfile install + `pnpm factory:health`; factory-health adds pinned actions, cache, and logging env.

- CLI (`pnpm af` / `pnpm factory run`): Commands implemented in `packages/factory/src/cli.ts`.
  - Readiness: Partial for two-layer productization.
  - Notes: Supports `agent:new`, `agent:list`, `agent:run`, `agent:validate`, `agent:validate:all`, and `factory run`; outputs deterministic JSON events and defined exit codes, but orchestration target is fixed to `repo-patch`.

- Testing/Evals: `packages/evals` contains smoke suites and guards (`check:agent-manifests`, `check:no-agent-runtime-copies`, retrieval and runner smoke evals), with reports written to `packages/evals/.reports/*.latest.json`.
  - Readiness: Partial.
  - Notes: Deterministic and CI-friendly, but focused on smoke checks and does not yet deeply validate generalized multi-file repo patch behavior.

## Gaps
### Architecture gaps
- [CRITICAL] Implement stage is not generalized: repo-patch always generates the same `hello.txt` diff (`services/agents/repo-patch/src/index.ts:73`) and only applies that file path (`services/agents/repo-patch/src/index.ts:100`).
- [HIGH] Integrate stage exists but is constrained by stub patch generation, so end-to-end orchestration cannot realize arbitrary plans despite sub-agent chaining (`services/agents/repo-patch/src/index.ts:324`).
- [HIGH] Operate stage lacks a dedicated monitoring/maintenance component; current operational behavior is CI/eval gating only.
- [MEDIUM] Manifest/input schema enforcement is a subset of JSON Schema in runner validator, limiting strictness for fields like `enum` during input validation (`services/agent-runner/src/index.ts:226`).
- [MEDIUM] Patch application is not atomic rollback across files; failures after partial writes are not reverted.

### Documentation gaps
- [HIGH] No root `README.md` describing production architecture, setup, and two-layer usage path.
- [HIGH] Primary top-level docs are bootstrap-era (`AGENT_FACTORY_MVP.md`, `AGENTS.md`) and still centered on milestone execution protocol.
- [MEDIUM] Agent README files for key modules are placeholders and do not document real behavior/safety constraints.

### Infrastructure gaps
- [HIGH] Evals do not provide robust scenario coverage for generalized implement/integrate behavior (multi-file edits, conflict handling, rollback semantics).
- [MEDIUM] Local state artifacts under `.factory/runs/` are rich but there is no explicit schema validation/check step for artifact completeness in CI.
- [MEDIUM] Two-layer boundary is implicit; no dedicated Layer 2 interface package or contract module formalizes orchestration API surface.

### Cleanup needed
- [MEDIUM] Generated debug config dumps at repo root (`_contracts_showConfig.json`, `_contracts_tsc_showConfig.json`, `_evals_tsc_showConfig.json`) should be archived or removed from main workspace surface.
- [MEDIUM] `services/agents/_shared/runtime.ts` duplicates runtime helper logic despite runtime import invariant and should be reconciled.
- [MEDIUM] Large local `.factory/runs/*` history increases workspace noise even if gitignored.

## Executive Summary
The repository has a solid deterministic scaffold for an Agent Factory workspace: pnpm workspace wiring, TypeScript builds, manifest-driven loading, strict CI health gates, and artifacted run traces are all in place. All five Layer 1 pipeline stages are represented by code entrypoints, and orchestration wiring from repo-read to plan to validate to git-pr is implemented. The biggest blocker is that implementation logic is still a hardcoded stub: repo-patch always emits and applies a fixed `hello.txt` patch, which prevents real production use. Verification and operations are present but mostly smoke-level and CI-centric, so production confidence for generalized changes is limited. Documentation is heavily bootstrap-era and lacks a production-oriented root usage guide and real agent docs. State management is one of the stronger areas, with explicit contracts and consistent `.factory/runs/<id>` artifact handoffs. Overall readiness is best described as platform-strong but product-incomplete for a two-layer architecture. Estimated transformation scope is moderate-to-large: replace stub implement logic with generalized patch generation/application, formalize Layer 2 interfaces, expand eval depth, and refresh documentation for production use.
